% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pq_archive_restore.R
\name{pq_archive}
\alias{pq_archive}
\title{Archive a Parquet file into the archive subdirectory}
\usage{
pq_archive(
  table_name = NULL,
  schema = NULL,
  data_dir = Sys.getenv("DATA_DIR", "."),
  file_name = NULL,
  archive_dir = "archive"
)
}
\arguments{
\item{table_name}{Name of the table. Required if \code{file_name} is not
provided.}

\item{schema}{Schema name. Required if \code{file_name} is not provided.}

\item{data_dir}{Root directory of the Parquet data repository. Defaults to
the \code{DATA_DIR} environment variable, or \code{"."} if unset.}

\item{file_name}{Full path to the Parquet file to archive. If provided,
\code{table_name}, \code{schema}, and \code{data_dir} are ignored.}

\item{archive_dir}{Name of the archive subdirectory relative to the schema
directory. Defaults to \code{"archive"}.}
}
\value{
Invisibly returns the path to the archived file, or \code{NULL} if
the source file does not exist.
}
\description{
Moves a Parquet file into an archive subdirectory, appending a timestamp
suffix derived from the file's \code{last_modified} metadata. The archived
filename takes the form \code{<table>_<YYYYMMDDTHHMMSSz>.parquet}.
}
\details{
Either \code{file_name} or both \code{table_name} and \code{schema} must be
provided.
}
\examples{
\dontrun{
pq_archive("company", "comp")
pq_archive(file_name = "~/pq_data/comp/company.parquet")
}

}
\seealso{
\code{\link{pq_restore}}, \code{\link{wrds_update_pq}}
}
